

from telethon import events
import asyncio
import os
import sys
import random
from userbot.events import javes05
import datetime
from telethon import events
from telethon.errors.rpcerrorlist import YouBlockedUserError
from telethon.tl.functions.account import UpdateNotifySettingsRequest
from userbot import bot, CMD_HELP



@javes05(outgoing=True, pattern="^!instant(?: |$)(.*)")
async def _(event):
    if event.fwd_from:
        return 
    if not event.reply_to_msg_id:
       await event.edit("```Reply to a Link.```")
       return
    reply_message = await event.get_reply_message() 
    if not reply_message.text:
       await event.edit("```Reply to a Link```")
       return
    chat = "@CorsaBot"
    sender = reply_message.sender
    await event.edit("```Processing```")
    async with event.client.conversation(chat) as conv:
          try:     
              response = conv.wait_event(events.NewMessage(incoming=True,from_users=272572121))
              await event.client.forward_messages(chat, reply_message)
              response = await response 
          except YouBlockedUserError: 
              await event.reply("`unblock @CorsaBot`")
              return
          if response.text.startswith(""):
             await event.edit("error3")
          else: 
             await event.delete()
             await event.client.send_message(event.chat_id, response.message)

@javes05(outgoing=True, pattern="^!play$")

async def _(event):

    if event.fwd_from:

        return

    animation_interval = 1

    animation_ttl = range(0, 30)

   # input_str = event.pattern_match.group(1)

   # if input_str == "chu":

    await event.edit("Nice...")

    animation_chars = [

            "?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",
            
            "??????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",

            "???????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",

            "?????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",

            "?????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",

            "???????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",

            "??????????\n??????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",
            
            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n?????????????????????????????????????????????\n?????????????????????????????????????????????",
            
            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????????????????????????????????\n?????????????????????????????????????????????",
   
            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????????????????????????????????",

            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????????????????????????????????\n???????????????????????????????",

            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????????????????????????????????\n????????????????????????",

            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????????????????????????????????\n?????????????????",

            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????????????????????????????????\n??????????",

            "??????????\n??????????????????????????????????????\n??????????????????????????????????????\n???????????????????????????????\n??????????",

            "??????????\n??????????????????????????????????????\n???????????????????????????????\n???????????????????????????????\n??????????",

            "??????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n??????????",

            "??????????\n????????????????????????\n???????????????????????????????\n???????????????????????????????\n??????????",

            "??????????\n?????????????????\n???????????????????????????????\n???????????????????????????????\n??????????",

            "??????????\n??????????\n???????????????????????????????\n???????????????????????????????\n??????????",

            "??????????\n??????????\n????????????????????????\n???????????????????????????????\n??????????",

            "??????????\n??????????\n????????????????????????\n????????????????????????\n??????????",

            "??????????\n??????????\n????????????????????????\n?????????????????\n??????????",

            "??????????\n??????????\n????????????????????????\n??????????\n??????????",

            "??????????\n??????????\n?????????????????\n??????????\n??????????",

            "??????????\n??????????\n??????????\n??????????\n??????????",
          
            "????????\n????????\n????????\n????????",
           
            "??????\n??????\n??????",

            "????\n????",

            "??"
        ]

    for i in animation_ttl:

        await asyncio.sleep(animation_interval)

        await event.edit(animation_chars[i % 30])




